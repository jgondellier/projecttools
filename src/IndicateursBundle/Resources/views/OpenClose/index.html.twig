{% extends 'base.html.twig' %}

{% block title %}Indicateurs - Nombre d'ouverture / Fermeture {% endblock %}

{% block stylesheets %}
        {% stylesheets output='css/compiled/main.indic.css' filter='cssrewrite'
        '@IndicateursBundle/Resources/public/css/datatables.min.css'
        '@IndicateursBundle/Resources/public/css/jquery.dataTables.min.css'
        '@IndicateursBundle/Resources/public/css/dataTables.bootstrap.min.css'%}
        <link rel="stylesheet" href="{{ asset_url }}" type="text/css" />
        {% endstylesheets %}
{% endblock %}

{% block body %}
    <div class="container">
        {{ table_delai_HTML| raw }}
        <div class="row">
            <div class="col-sm-12">
                <div id="chartContainer" style="height: 300px; width: 100%;">
            </div>
        </div>
    </div>
    <script type="text/javascript">
        window.onload = function(){
            $(document).ready(function() {
                {{ table_incidentReouverture_JS| raw }}
                getOpenCloseGraph();
            } );
        };
        function getOpenCloseGraph(type,id){
            if(type && id){
                switch (type){
                    case "Mois":
                        $.get( "openclose/graph/2016/"+id, function( data ) {
                          $( "#chartContainer" ).html( data );
                        });
                        break;
                    case "Projet":
                        $.get( "openclose/graph/2016/all/"+id, function( data ) {
                          $( "#chartContainer" ).html( data );
                        });
                        break;
                    case "Nature":
                        $.get( "openclose/graph/2016/all/all/"+id, function( data ) {
                          $( "#chartContainer" ).html( data );
                        });
                    break;
                    case "Priorit√©":
                        $.get( "openclose/graph/2016/all/all/all/"+id, function( data ) {
                          $( "#chartContainer" ).html( data );
                        });
                        break;
                    default:
                        $.get( "openclose/graph/2016", function( data ) {
                          $( "#chartContainer" ).html( data );
                        });
                }
            }else{
                $.get( "openclose/graph/2016", function( data ) {
                  $( "#chartContainer" ).html( data );
                });
            }
        }
    </script>
{% endblock %}

{% block javascripts %}
    {% javascripts output='js/compiled/main.indic.js'
    '@IndicateursBundle/Resources/public/js/datatables.min.js'
    '@IndicateursBundle/Resources/public/js/highcharts.js'
    '@IndicateursBundle/Resources/public/js/moment.min.js'
    '@IndicateursBundle/Resources/public/js/moment-with-locales.min.js'
    '@IndicateursBundle/Resources/public/js/datetime-moment.js'
    '@IndicateursBundle/Resources/public/js/dataTables.sum.js'
    '@IndicateursBundle/Resources/public/js/modules/exporting.js'%}
    <script type="text/javascript" src="{{ asset_url }}"></script>
    {% endjavascripts %}
{% endblock %}